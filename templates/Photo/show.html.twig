{% extends 'Template/StandardTemplate.html.twig' %}
{% import 'Template/Macros/breadcrumb.html.twig' as breadcrumb %}

{% set previous_photo = previous_entity(photo) %}
{% set next_photo = next_entity(photo) %}

{% block breadcrumb %}
    {{ breadcrumb.item('photo.show.breadcrumb_city_list'|trans, path('caldera_criticalmass_city_list')) }}
    {{ breadcrumb.item(city.city, object_path(city)) }}
    {{ breadcrumb.item(ride.title, object_path(ride)) }}
    {{ breadcrumb.item('photo.show.breadcrumb_photos'|trans, object_path(ride, 'caldera_criticalmass_photo_ride_list')) }}
    {{ breadcrumb.active('photo.show.breadcrumb_photo'|trans({'%id%': photo.id, '%city%': city.city})) }}
{% endblock %}

{% block navigation %}
    <div class="row">
        <div class="col-md-12">
            <nav aria-label="{{ 'photo.show.navigation_label'|trans }}">
                <ul class="pagination justify-content-between">
                    <li class="page-item{% if not previous_photo %} disabled{% endif %}">
                        <a class="page-link" href="{% if previous_photo %}{{ object_path(previous_photo) }}{% else %}#{% endif %}">
                            {{ 'photo.show.previous_photo'|trans|raw }}
                        </a>
                    </li>

                    <li class="page-item{% if not next_photo %} disabled{% endif %}">
                        <a class="page-link" href="{% if next_photo %}{{ object_path(next_photo) }}{% else %}#{% endif %}">
                            {{ 'photo.show.next_photo'|trans|raw }}
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
{% endblock %}

{% block content %}
<div class="container">
    {{ block('navigation') }}

    <div class="row">
        <div class="col-md-12">
            {% if not app.user and photo.user.blurGalleries %}
                <div class="row" style="position: absolute; z-index: 100; width: 100%; height: 100%; top: 100px;">
                    <div class="col-md-6 col-md-offset-3">
                        <div class="panel panel-danger">
                            <div class="panel-body">
                                <h4 class="text-center">
                                    {{ 'photo.show.login_heading'|trans }}
                                </h4>

                                <p>
                                    {{ 'photo.show.login_text'|trans }}
                                </p>

                                <p class="text-center">
                                    <a href="#" data-bs-toggle="modal" data-bs-target="#loginModal" class="btn btn-primary">
                                        {{ 'photo.show.login_button'|trans }}
                                    </a>
                                </p>

                                <h6 class="text-center">
                                    {{ 'photo.show.login_why_heading'|trans }}
                                </h6>

                                <p>
                                    <small>
                                        {{ 'photo.show.login_why_text'|trans|raw }}
                                    </small>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <img id="photo" class="img-responsive"
                     src="{{ vich_uploader_asset(photo, 'imageFile')|imagine_filter('gallery_photo_blurred') }}"
                     style="width: 100%;"/>
            {% else %}
                <img id="photo" class="img-responsive"
                     src="{{ vich_uploader_asset(photo, 'imageFile')|imagine_filter('gallery_photo_standard') }}"/>
            {% endif %}
        </div>
    </div>

    <div class="row margin-top-medium">
        <div class="col-md-8">
            {% include 'Photo/_comments.html.twig' with { 'photo': photo } %}
        </div>

        <div class="col-md-4">
            {% include 'Photo/_map.html.twig' with { 'photo': photo } %}
            {% include 'Photo/_details.html.twig' with { 'photo': photo } %}
        </div>
    </div>

        {{ block('navigation') }}
</div>

{% endblock %}
