{% extends 'Template/StandardTemplate.html.twig' %}{% import 'Bootstrap/bootstrap_macros.html.twig' as bootstrap %}

{% block title %}Statistiken{% endblock %}

{% import 'Bootstrap/bootstrap_macros.html.twig' as bootstrap %}

{% block breadcrumb %}
    {{ bootstrap.breadcrumb_item('Statistiken', '', true) }}
{% endblock %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h2>
                    Critical-Mass-Statistiken
                </h2>

                <p class="lead">
                    Wie viele, wie lange, wohin? Diese Seite bereitet die statistischen Daten auf, die von Teilnehmern der Critical Mass in den verschiedenen Städten nach einer Tour eingearbeitet worden sind &mdash; entweder von den importieren GPX-Tracks oder mit Schätzungen der Teilnehmerzahlen.
                </p>
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                {{ bootstrap.tabs([
                    { tab: 'participants', caption: '<i class="fa fa-group"></i> Teilnehmerzahl', active: true },
                    { tab: 'duration', caption: '<i class="fa fa-clock-o"></i> Fahrtdauer' },
                    { tab: 'distance', caption: '<i class="fa fa-map"></i> Streckenlänge' }
                ]) }}
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                {{ bootstrap.tab_panels([
                    { id: 'participants', active: true, content: '
                    <div class="row mt-1">
                        <div class="col-12">
                            <p>
                                Bei der angezeigten Teilnehmerzahl handelt es sich um den Durchschnitt der Werte, die von den Teilnehmern geschätzt wurden.
                            </p>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12">
                            <canvas id="participants-canvas" style="width: 100%; height: 250px;"></canvas>
                        </div>
                    </div>
                    ' },
                    { id: 'duration', content: '
                    <div class="row mt-1">
                        <div class="col-12">
                            <p>
                                Die Fahrtdauer wird anhand der importierten GPX-Tracks ermittelt und in Stunden angegeben.
                            </p>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12">
                            <canvas id="duration-canvas" style="width: 100%; height: 75vh;"></canvas>
                        </div>
                    </div>
                    ' },
                    { id: 'distance', content: '
                    <div class="row mt-1">
                        <div class="col-12">
                            <p>
                                Die Fahrtlänge wird anhand der importierten GPX-Tracks ermittelt und in Kilometern angegeben.
                            </p>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-12">
                            <canvas id="distance-canvas" style="width: 100%; height: 75vh;"></canvas>
                        </div>
                    </div>
                    ' }
                    ]) }}
            </div>
        </div>

        <div class="row">
            <div class="col-12">
                <p>
                    Die Statistiken enthalten alle Städte aus Deutschland, bei denen innerhalb der letzten zwei Jahre mindestens 18 Schätzungen zu Teilnehmer-Zahlen abgegeben wurden.
                </p>
            </div>
        </div>
    </div>

    {% for rideMonth in rideMonths %}
        <div class="ride-month" data-ride-month="{{ rideMonth }}"></div>
    {% endfor %}

    {% for city in cities %}
        <div class="city" data-city-name="{{ city.city }}" data-city-slug="{{ city.slug }}" data-color-red="{{ city.colorRed }}" data-color-green="{{ city.colorGreen }}" data-color-blue="{{ city.colorBlue }}"></div>
    {% endfor %}

    {% for ride in rides %}
        <div class="ride-data" data-city-slug="{{ ride.city.slug }}" data-ride-month="{{ ride.dateTime|date('Y-m') }}" data-estimated-participants="{{ ride.estimatedParticipants|default(0) }}" data-estimated-duration="{{ ride.estimatedDuration|default(0) }}" data-estimated-distance="{{ ride.estimatedDistance|default(0) }}"></div>
    {% endfor %}
{% endblock %}
