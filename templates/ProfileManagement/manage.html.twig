{% extends 'Template/StandardTemplate.html.twig' %}
{% import 'Template/Macros/breadcrumb.html.twig' as breadcrumb %}

{% block title %}Dein Benutzerprofil{% endblock %}

{% block breadcrumb %}
    {{ breadcrumb.active('Dein Benutzerkonto') }}
{% endblock %}

{% block content %}
    <div class="container">
        <div class="row">
            <div class="col-md-10 offset-md-1">
                <h2>
                    Hej {{ app.getUser().getUsername() }}, schön, dass du da bist!
                </h2>

                <p class="lead">
                    Willkommen in deinem Benutzerkonto!
                    Hier kannst du deine {% if feature('photos') %}Fotos, {% endif %}Tracks und Teilnahmen verwalten und deine Kontoeinstellungen ändern.
                </p>
            </div>
        </div>

        {% for flashMessage in app.session.flashbag.get('success') %}
            <div class="row">
                <div class="col-md-10 offset-md-1">
                    <div class="alert alert-dismissible alert-success" role="alert">
                        {{ flashMessage }}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                </div>
            </div>
        {% endfor %}

        <div class="row">
            <div class="col-md-10 offset-md-1">
                <div class="row g-3">
                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-white">
                                <i class="far fa-camera text-primary me-2"></i>Profilfoto ändern
                            </div>
                            <div class="card-body d-flex flex-column">
                                <p>
                                    Lade ein Foto für dein Profil hoch.
                                </p>

                                <div class="mt-auto text-center">
                                    <a class="btn btn-outline-primary btn-sm"
                                       href="{{ path('criticalmass_user_profile_photo') }}">
                                        <i class="far fa-camera me-1"></i>Profilfoto ändern
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-white">
                                <i class="far fa-palette text-success me-2"></i>Profilfarbe wählen
                            </div>
                            <div class="card-body d-flex flex-column">
                                <p>
                                    Ändere die Farbe deines Benutzerkontos.
                                </p>

                                <div class="mt-auto text-center">
                                    <a class="btn btn-outline-success btn-sm"
                                       href="{{ path('criticalmass_user_profile_color') }}">
                                        <i class="far fa-palette me-1"></i>Profilfarbe wählen
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-white">
                                <i class="far fa-bicycle text-warning me-2"></i>Deine Touren
                            </div>
                            <div class="card-body d-flex flex-column">
                                {% if participationCounter == 0 %}
                                    <div class="text-center py-3">
                                        <i class="far fa-bicycle fa-2x text-muted mb-2"></i>
                                        <p class="text-muted mb-0">
                                            Du hast noch an keiner Critical Mass teilgenommen. Im <a href="{{ path('caldera_criticalmass_calendar') }}">Kalender</a> findest du Touren in deiner Nähe.
                                        </p>
                                    </div>
                                {% else %}
                                    <p>
                                        Super: Du hast bislang an {{ participationCounter }} Critical-Mass-Touren
                                        teilgenommen.
                                    </p>

                                    <div class="mt-auto text-center">
                                        <a class="btn btn-outline-warning btn-sm"
                                           href="{{ path('criticalmass_user_participation_list') }}">
                                            <i class="far fa-bicycle me-1"></i>Tourenübersicht
                                        </a>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-white">
                                <i class="far fa-route text-info me-2"></i>Deine Tracks
                            </div>
                            <div class="card-body d-flex flex-column">
                                {% if trackCounter == 0 %}
                                    <div class="text-center py-3">
                                        <i class="far fa-route fa-2x text-muted mb-2"></i>
                                        <p class="text-muted mb-0">
                                            Du hast bislang noch keine Tracks von Critical-Mass-Touren gespeichert. Schau in
                                            die Hilfe, wenn du weitere Informationen zu diesem Thema benötigst.
                                        </p>
                                    </div>
                                {% else %}
                                    <p>
                                        Von deinen Critical-Mass-Touren hast du insgesamt {{ trackCounter }} Tracks
                                        hochgeladen.
                                    </p>

                                    <div class="mt-auto text-center">
                                        <a class="btn btn-outline-info btn-sm" href="{{ path('caldera_criticalmass_track_list') }}">
                                            <i class="far fa-route me-1"></i>Tracks verwalten
                                        </a>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>

                    {% if feature('photos') %}
                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-white">
                                <i class="far fa-images text-secondary me-2"></i>Deine Fotos
                            </div>
                            <div class="card-body d-flex flex-column">
                                {% if photoCounter == 0 %}
                                    <div class="text-center py-3">
                                        <i class="far fa-images fa-2x text-muted mb-2"></i>
                                        <p class="text-muted mb-0">
                                            Du hast bislang noch keine Fotos hochgeladen. In der Hilfe findest du mehr
                                            Informationen zu diesem Thema.
                                        </p>
                                    </div>
                                {% else %}
                                    <p>
                                        Du hast von deinen Touren {{ photoCounter }} Fotos hochgeladen.
                                    </p>

                                    <div class="mt-auto text-center">
                                        <a class="btn btn-outline-secondary btn-sm"
                                           href="{{ path('caldera_criticalmass_photo_user_list') }}">
                                            <i class="far fa-images me-1"></i>Fotos verwalten
                                        </a>
                                    </div>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% endif %}

                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-white">
                                <i class="far fa-user text-primary me-2"></i>Benutzername ändern
                            </div>
                            <div class="card-body d-flex flex-column">
                                <p>
                                    Hier kannst du deinen Benutzernamen ändern.
                                </p>

                                <div class="mt-auto text-center">
                                    <a class="btn btn-outline-primary btn-sm"
                                       href="{{ path('criticalmass_user_usermanagement_editusername') }}">
                                        <i class="far fa-edit me-1"></i>Benutzername ändern
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="card border-0 shadow-sm h-100">
                            <div class="card-header bg-white">
                                <i class="far fa-envelope text-warning me-2"></i>E-Mail-Adresse ändern
                            </div>
                            <div class="card-body d-flex flex-column">
                                <p>
                                    Hier kannst du deine E-Mail-Adresse ändern. Bedenke bitte, dass du dich künftig
                                    mit deinen neuen Benutzerdaten einloggen musst.
                                </p>

                                <div class="mt-auto text-center">
                                    <a class="btn btn-outline-warning btn-sm"
                                       href="{{ path('criticalmass_user_usermanagement_editemail') }}">
                                        <i class="far fa-edit me-1"></i>E-Mail-Adresse ändern
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
